'use client';

import { useState } from 'react';
import { useCart } from '@/context/CartContext';
import { FaDownload } from 'react-icons/fa';
import Image from 'next/image';

interface Product {
  id: string;
  name: string;
  description: string;
  features: string[];
  image: string;
  category: string;
  unit: string;
  artnr: string;
  groupDescription?: string;
  packaging?: string;
}

// Icon-Komponenten f√ºr Eigenschaften
const icons = {
  cotton: (
    <span title="100% Baumwolle" className="inline-block w-8 h-8 text-green-700 align-middle text-2xl">üå±</span>
  ),
  absorbent: (
    <span title="Sehr saugf√§hig" className="inline-block w-8 h-8 text-blue-500 align-middle text-2xl">üíß</span>
  ),
  oil: (
    <span title="Ideal f√ºr Fett & √ñl" className="inline-block w-8 h-8 text-yellow-600 align-middle text-2xl">üõ¢Ô∏è</span>
  ),
  lintfree: (
    <span title="Fusselfrei" className="inline-block w-8 h-8 text-gray-400 align-middle text-2xl">üßΩ</span>
  ),
  polish: (
    <span title="Polierf√§hig" className="inline-block w-8 h-8 text-green-600 align-middle text-2xl">‚ú®</span>
  ),
};

// Mapping von Eigenschaften zu Icons pro Produkt
const productFeaturesIcons: { [key: string]: (keyof typeof icons)[] } = {
  'trikot-bunt': ['cotton', 'absorbent', 'oil'],
  'trikot-weiss': ['cotton', 'absorbent', 'oil'],
  'kattun-hellbunt': ['cotton', 'lintfree'],
  'kattun-weiss': ['cotton', 'lintfree'],
  'bettwaesche-bunt': ['cotton', 'lintfree', 'absorbent'],
  'biberbettwaesche-bunt': ['cotton', 'absorbent', 'polish'],
  'bettwaesche-weiss': ['cotton', 'lintfree', 'absorbent'],
  'frottee': ['cotton', 'absorbent'],
  'bunt-standard': ['absorbent'],
  'sonstige': [],
};

// Eigenschaften-Filter Optionen
const filterOptions = [
  { key: 'cotton', label: '100% Baumwolle', icon: icons.cotton },
  { key: 'absorbent', label: 'Sehr saugf√§hig', icon: icons.absorbent },
  { key: 'oil', label: 'Ideal f√ºr Fett & √ñl', icon: icons.oil },
  { key: 'lintfree', label: 'Fusselfrei', icon: icons.lintfree },
  { key: 'polish', label: 'Polierf√§hig', icon: icons.polish },
];

export default function Products() {
  const { addItem } = useCart();
  const [quantities, setQuantities] = useState<{ [key: string]: number }>({});
  const [activeTooltip, setActiveTooltip] = useState<string | null>(null);
  const [activeFilters, setActiveFilters] = useState<string[]>([]);

  // Putzlappen Gruppe mit Einleitung und Verpackung
  const putzlappenGroupDescription = `Unsere manuell gefertigten Putzlappen bestehen aus nicht mehr tragf√§higen Alttextilien, die per Hand auf speziellen Putzlappenschneidemaschinen in handliche St√ºcke (ca. 45 x 45 cm) gefertigt werden.\nDer hohe Baumwollanteil der Putzlappen garantiert enorme Saugf√§higkeit und effiziente Reinigung.\nKn√∂pfe, Rei√üverschl√ºsse und andere nicht zugeh√∂rige Teile werden entfernt, um ein schonendes Reinigen zu erm√∂glichen. Obige Bearbeitungskriterien entsprechen der DIN 61650.`;
  const putzlappenPackaging = `Standardm√§√üig verpacken wir die Putzlappen in folgende Einheiten: 10 kg oder 25 kg Pressballen. Nach Wunsch sind auch andere Gr√∂√üen m√∂glich. Palettengr√∂√üe 300 kg = 30 Ballen √† 10 kg oder 12 Ballen √† 25 kg.`;

  const products = [
    {
      id: 'putzlappen',
      category: 'Putzlappen',
      groupDescription: putzlappenGroupDescription,
      packaging: putzlappenPackaging,
      items: [
        {
          id: 'trikot-bunt',
          name: 'Trikotputzlappen bunt',
          artnr: '2222',
          description: 'Bearbeitet nach DIN 61650. Meistbestellter Putzlappen aus reiner Baumwolle in T-Shirt, Sweatshirt und Unterhemdenqualit√§t, sehr saugf√§higes Material. Sehr gut geeignet f√ºr die Aufnahme von Fett und √ñl.',
          features: [
            'Material: 100% Baumwolle (T-Shirt, Sweatshirt, Unterhemden)',
            'Sehr saugf√§hig',
            'Ideal f√ºr Fett und √ñl'
          ],
          image: '/products/Kattun_Putzlappen_Bunt.jpg',
          unit: 'kg',
          category: 'Putzlappen',
        },
        {
          id: 'trikot-weiss',
          name: 'Trikotputzlappen wei√ü',
          artnr: '2292',
          description: 'Bearbeitet nach DIN 61650. Hergestellt aus sehr saugf√§higen Baumwollstoffen wie T-Shirt und Unterhemdenmaterial. Sehr gut geeignet f√ºr die Aufnahme von Fett und √ñl.',
          features: [
            'Material: 100% Baumwolle (wei√ü)',
            'Sehr saugf√§hig',
            'Ideal f√ºr Fett und √ñl',
            'Ihre gew√ºnschte Menge in Kilogramm bitte in das untenstehende Feld eingeben.'
          ],
          image: '/products/Industrieputzlappen-Trikot-weiss.jpg',
          unit: 'kg',
          category: 'Putzlappen',
        },
        {
          id: 'kattun-hellbunt',
          name: 'Kattunputzlappen hellbunt',
          artnr: '2102',
          description: 'Putzlappen nach DIN 61650 aus d√ºnner, leichter Baumwollware, wie Hemden-, Blusen-, und Sch√ºrzenstoffe. Sehr gut geeignet f√ºr leichte Putzarbeiten bei fusselfreiem Einsatz.',
          features: [
            'Material: d√ºnne, leichte Baumwolle',
            'Fusselfrei',
            'F√ºr leichte Putzarbeiten'
          ],
          image: '/products/Kattun_Putzlappen_Bunt.jpg',
          unit: 'kg',
          category: 'Putzlappen',
        },
        {
          id: 'kattun-weiss',
          name: 'Kattunputzlappen wei√ü',
          artnr: '2190',
          description: 'Wei√üe Kattunputzlappen nach DIN 61650, hergestellt aus leichten Baumwollstoffen wie Hemden-, Blusen-, und Sch√ºrzenmaterial. Sehr gut geeignet f√ºr leichte Putzarbeiten bei fusselfreiem Einsatz.',
          features: [
            'Material: leichte Baumwolle (wei√ü)',
            'Fusselfrei',
            'F√ºr leichte Putzarbeiten',
            'Ihre gew√ºnschte Menge in Kilogramm bitte in das untenstehende Feld eingeben.'
          ],
          image: '/products/Kattun_Putzlappen_Bunt.jpg',
          unit: 'kg',
          category: 'Putzlappen',
        },
        {
          id: 'bettwaesche-bunt',
          name: 'Putzlappen aus Bettw√§sche bunt',
          artnr: '2153',
          description: 'Bunte Putzlappen aus Bettw√§sche nach DIN 61650. Hergestellt aus reinen Baumwollstoffen wie Bettlaken, Bez√ºge usw. Wenn ein nahtloses, fusselfreies und zugleich saugf√§higes Material gew√ºnscht wird, empfehlen wir diesen Putzlappen.',
          features: [
            'Material: Baumwoll-Bettw√§sche (bunt)',
            'Nahtlos, fusselfrei, saugf√§hig',
            'Empfohlen f√ºr anspruchsvolle Reinigung',
            'Ihre gew√ºnschte Menge in Kilogramm bitte in das untenstehende Feld eingeben.'
          ],
          image: '/products/Kattun_Putzlappen_Bunt.jpg',
          unit: 'kg',
          category: 'Putzlappen',
        },
        {
          id: 'biberbettwaesche-bunt',
          name: 'Putzlappen aus Biberbettw√§sche bunt',
          artnr: '2150',
          description: 'Bunte Putzlappen aus Biberbettw√§sche hergestellt nach DIN 61650. Das Material ist nahtfrei, sehr weich, gut saugf√§hig und eignet sich hervorragend f√ºr Polierarbeiten.',
          features: [
            'Material: Biberbettw√§sche (bunt)',
            'Nahtfrei, sehr weich, saugf√§hig',
            'Ideal f√ºr Polierarbeiten',
            'Ihre gew√ºnschte Menge in Kilogramm bitte in das untenstehende Feld eingeben.'
          ],
          image: '/products/Kattun_Putzlappen_Bunt.jpg',
          unit: 'kg',
          category: 'Putzlappen',
        },
        {
          id: 'bettwaesche-weiss',
          name: 'Putzlappen aus Bettw√§sche wei√ü',
          artnr: '2180',
          description: 'Wei√üe Putzlappen aus Bettw√§sche nach DIN 61650. Hergestellt aus reinen Baumwollstoffen wie Bettlaken, Bez√ºge usw. Das Material ist sehr saugf√§hig, fusselarm und nahtfrei.',
          features: [
            'Material: Baumwoll-Bettw√§sche (wei√ü)',
            'Sehr saugf√§hig, fusselarm, nahtfrei',
            'Empfohlen f√ºr anspruchsvolle Reinigung',
            'Ihre gew√ºnschte Menge in Kilogramm bitte in das untenstehende Feld eingeben.'
          ],
          image: '/products/Kattun_Putzlappen_Bunt.jpg',
          unit: 'kg',
          category: 'Putzlappen',
        },
        {
          id: 'frottee',
          name: 'Putzlappen aus Frottee',
          artnr: '2300',
          description: 'Putzlappen aus Frottee nach DIN 61650. Hergestellt aus Handt√ºchern, Badelaken und Badem√§nteln. Dieses Material hat das h√∂chste Saugverm√∂gen im Bereich textiler Putzlappen. Wir sind auch in der Lage z.B. ausschlie√ülich Frotteehandt√ºcher zu sortieren, welche mittig 1x durchgeschnitten sind.',
          features: [
            'Material: Frottee (Handt√ºcher, Badelaken, Badem√§ntel)',
            'H√∂chstes Saugverm√∂gen',
            'Auch als geschnittene Frotteehandt√ºcher erh√§ltlich',
            'Ihre gew√ºnschte Menge in Kilogramm bitte in das untenstehende Feld eingeben.'
          ],
          image: '/products/Industrieputzlappen-Frottee-bunt.jpg',
          unit: 'kg',
          category: 'Putzlappen',
        },
        {
          id: 'bunt-standard',
          name: 'Bunte Putzlappen Standard',
          artnr: '2000',
          description: 'Bunte Putzlappen Standard nach DIN 61650. (preisg√ºnstigste Sorte) Unser Standard Putzlappen besteht aus mittleren bis groben Textilien wie Jeans, Cord und anderen mittelschweren Stoffen. Ein geringer Anteil synthetischer Fasern ist ebenfalls enthalten. Dieser Putzlappen eignet sich eher f√ºr grobe Putzarbeiten.',
          features: [
            'Material: Jeans, Cord, mittelschwere Stoffe',
            'Geringer Anteil synthetischer Fasern',
            'F√ºr grobe Putzarbeiten',
            'Ihre gew√ºnschte Menge in Kilogramm bitte in das untenstehende Feld eingeben.'
          ],
          image: '/products/Kattun_Putzlappen_Bunt.jpg',
          unit: 'kg',
          category: 'Putzlappen',
        },
        {
          id: 'sonstige',
          name: 'Sonstige Sorten',
          artnr: '',
          description: 'Wir haben noch eine Vielzahl anderer Sorten im Programm wie z.B.: neue bunte und wei√üe, als auch rohwei√üe Baumwoll Trikotputzlappen aus neuen Konfektionsabf√§llen (T-Shirt Produktion). Au√üerdem stellen wir Putzlappen aus textilem Handtuchmaterial her, desweiteren Cord und Blauleinen. Verschiedene andere Sorten auf Anfrage.',
          features: [
            'Neue bunte und wei√üe Sorten',
            'Rohwei√üe Baumwoll Trikotputzlappen aus neuen Konfektionsabf√§llen',
            'Handtuchmaterial, Cord, Blauleinen',
            'Verschiedene andere Sorten auf Anfrage'
          ],
          image: '/products/Kattun_Putzlappen_Bunt.jpg',
          unit: 'kg',
          category: 'Putzlappen',
        },
      ]
    },
    {
      id: '2',
      category: 'Putztuchreinigung',
      items: [
        {
          id: '2-1',
          name: 'Putztuchleasing',
          description: 'Mehrwegsystem Putztuchreinigung - eine saubere und umweltfreundliche L√∂sung.',
          features: [
            'Keine Lagerkosten',
            'Keine Abfallkosten',
            'Keine Transportkosten',
            '100% Baumwolle',
            '40 x 40 cm Gr√∂√üe'
          ],
          image: '/products/putztuch-leasing.jpg',
          unit: 'Service',
          artnr: '',
          category: 'Putztuchreinigung'
        },
        {
          id: '2-2',
          name: 'Putztuchreinigung in Lohnarbeit',
          description: 'Professionelle Reinigung Ihrer Putzt√ºcher in Lohnarbeit.',
          features: [
            'Abrechnung nach St√ºckzahl',
            'Eigentum an Putzt√ºchern',
            'Flexible Reinigungsintervalle',
            '100% Baumwolle',
            '40 x 40 cm Gr√∂√üe'
          ],
          image: '/products/putztuch-reinigung.jpg',
          unit: 'Service',
          artnr: '',
          category: 'Putztuchreinigung'
        }
      ]
    },
    {
      id: '3',
      category: 'Putzwolle',
      items: [
        {
          id: '3-1',
          name: 'Putzwolle bunt',
          artnr: '',
          description: 'Hochwertige Putzwolle in bunten Farben.',
          features: ['Stark scheuernd', 'F√ºr hartn√§ckige Verschmutzungen', 'Langlebig'],
          image: '/products/putzwolle-bunt.jpg',
          unit: 'kg',
          category: 'Putzwolle'
        },
        {
          id: '3-2',
          name: 'Putzwolle hellbunt',
          description: 'Putzwolle in hellen, bunten Farben.',
          features: ['Mittlere Scheuerwirkung', 'F√ºr normale Verschmutzungen', 'Gute Saugf√§higkeit'],
          image: '/products/putzwolle-hellbunt.jpg',
          unit: 'kg',
          artnr: '',
          category: 'Putzwolle'
        },
        {
          id: '3-3',
          name: 'Putzwolle wei√ü',
          artnr: '',
          description: 'Reine wei√üe Putzwolle f√ºr sensible Bereiche.',
          features: ['Sanfte Scheuerwirkung', 'F√ºr sensible Oberfl√§chen', 'Farbneutral'],
          image: '/products/putzwolle-weiss.jpg',
          unit: 'kg',
          category: 'Putzwolle'
        }
      ]
    },
    {
      id: '4',
      category: 'Vliest√ºcher',
      items: [
        {
          id: '4-1',
          name: 'Vliest√ºcher bunt',
          artnr: '',
          description: 'Hochwertige Vliest√ºcher in bunten Farben.',
          features: ['Sehr saugf√§hig', 'Lintfrei', 'F√ºr technische Anlagen'],
          image: '/products/vliestuecher-bunt.jpg',
          unit: 'Packung',
          category: 'Vliest√ºcher'
        },
        {
          id: '4-2',
          name: 'Vliest√ºcher hellbunt',
          artnr: '',
          description: 'Vliest√ºcher in hellen, bunten Farben.',
          features: ['Saugf√§hig', 'Lintfrei', 'F√ºr allgemeine Reinigung'],
          image: '/products/vliestuecher-hellbunt.jpg',
          unit: 'Packung',
          category: 'Vliest√ºcher'
        },
        {
          id: '4-3',
          name: 'Vliest√ºcher wei√ü',
          artnr: '',
          description: 'Wei√üe Vliest√ºcher f√ºr sensible Bereiche.',
          features: ['Hoch saugf√§hig', 'Lintfrei', 'F√ºr sensible Oberfl√§chen'],
          image: '/products/vliestuecher-weiss.jpg',
          unit: 'Packung',
          category: 'Vliest√ºcher'
        }
      ]
    },
    {
      id: '5',
      category: 'Hygienepapiere',
      items: [
        {
          id: '5-1',
          name: 'Papierhandt√ºcher',
          artnr: '',
          description: 'Hygienische Papierhandt√ºcher f√ºr Handtuchspender.',
          features: ['Hoch saugf√§hig', 'Rei√üfest', 'In verschiedenen Gr√∂√üen'],
          image: '/products/papierhandtuecher.jpg',
          unit: 'Packung',
          category: 'Hygienepapiere'
        },
        {
          id: '5-2',
          name: 'Handtuchrollen',
          artnr: '',
          description: 'Handtuchrollen f√ºr Handtuchspender.',
          features: ['Hygienisch', 'Saugf√§hig', 'F√ºr Spendersysteme'],
          image: '/products/handtuchrollen.jpg',
          unit: 'Rolle',
          category: 'Hygienepapiere'
        },
        {
          id: '5-3',
          name: 'Toilettenpapier Kleinrolle',
          artnr: '',
          description: 'Standard Toilettenpapier in Kleinrollen.',
          features: ['Weich', 'Rei√üfest', 'F√ºr Standardhalter'],
          image: '/products/toilettenpapier-klein.jpg',
          unit: 'Packung',
          category: 'Hygienepapiere'
        },
        {
          id: '5-4',
          name: 'Toilettenpapier Maxirolle',
          artnr: '',
          description: 'Gro√üe Toilettenpapierrollen f√ºr hohen Verbrauch.',
          features: ['Extra lang', 'Rei√üfest', 'F√ºr Maxi-Halter'],
          image: '/products/toilettenpapier-maxi.jpg',
          unit: 'Packung',
          category: 'Hygienepapiere'
        },
        {
          id: '5-5',
          name: 'Spendersysteme',
          artnr: '',
          description: 'Verschiedene Spendersysteme f√ºr Papierhandt√ºcher und Toilettenpapier.',
          features: ['Hygienisch', 'Langlebig', 'Einfach zu bef√ºllen'],
          image: '/products/spendersysteme.jpg',
          unit: 'St√ºck',
          category: 'Hygienepapiere'
        }
      ]
    },
    {
      id: '6',
      category: 'Sonstiges',
      items: [
        {
          id: '6-1',
          name: 'M√ºlls√§cke',
          artnr: '',
          description: 'Hochwertige M√ºlls√§cke in verschiedenen Gr√∂√üen.',
          features: ['Rei√üfest', 'In verschiedenen Gr√∂√üen', 'F√ºr Restm√ºll und Wertstoffe'],
          image: '/products/muellsaecke.jpg',
          unit: 'Packung',
          category: 'Sonstiges'
        },
        {
          id: '6-2',
          name: 'K√ºchenrollen',
          artnr: '',
          description: 'Saugf√§hige K√ºchenrollen f√ºr den t√§glichen Gebrauch.',
          features: ['Hoch saugf√§hig', 'Rei√üfest', 'In verschiedenen Gr√∂√üen'],
          image: '/products/kuechenrollen.jpg',
          unit: 'Packung',
          category: 'Sonstiges'
        },
        {
          id: '6-3',
          name: '√ñlsaugt√ºcher',
          artnr: '',
          description: 'Spezielle T√ºcher zum Aufsaugen von √ñlen und Fetten.',
          features: ['√ñlabsorbierend', 'Lintfrei', 'F√ºr technische Anlagen'],
          image: '/products/oelsaugtuecher.jpg',
          unit: 'Packung',
          category: 'Sonstiges'
        },
        {
          id: '6-4',
          name: '√ñlkehrsp√§ne',
          artnr: '',
          description: 'Spezielle Sp√§ne zum Binden von √ñlen und Fetten.',
          features: ['√ñlabsorbierend', 'Einfach zu kehren', 'F√ºr gro√üe Fl√§chen'],
          image: '/products/oelkehrspaene.jpg',
          unit: 'Sack',
          category: 'Sonstiges'
        },
        {
          id: '6-5',
          name: '√ñlbindemittel',
          artnr: '',
          description: 'Professionelle √ñlbindemittel f√ºr Industrie und Werkst√§tten.',
          features: ['Hoch absorbierend', 'F√ºr √ñle und Chemikalien', 'Umweltfreundlich'],
          image: '/products/oelbindemittel.jpg',
          unit: 'Packung',
          category: 'Sonstiges'
        },
        {
          id: '6-6',
          name: 'Malerabdeckvlies',
          artnr: '',
          description: 'Schutzvlies f√ºr Malerarbeiten und Renovierungen.',
          features: ['Rei√üfest', 'Wiederverwendbar', 'In verschiedenen Gr√∂√üen'],
          image: '/products/malerabdeckvlies.jpg',
          unit: 'Rolle',
          category: 'Sonstiges'
        },
        {
          id: '6-7',
          name: 'Arbeitsschutzbekleidung',
          artnr: '',
          description: 'Professionelle Arbeitsschutzbekleidung f√ºr verschiedene Einsatzbereiche.',
          features: ['Schutzklasse nach EN 340', 'In verschiedenen Gr√∂√üen', 'F√ºr verschiedene Anwendungen'],
          image: '/products/arbeitsschutz.jpg',
          unit: 'St√ºck',
          category: 'Sonstiges'
        },
        {
          id: '6-8',
          name: 'Handwaschpaste',
          artnr: '',
          description: 'Professionelle Handwaschpaste f√ºr stark verschmutzte H√§nde.',
          features: ['Hautschonend', 'Stark reinigend', 'Mit Pflegewirkung'],
          image: '/products/handwaschpaste.jpg',
          unit: 'Dose',
          category: 'Sonstiges'
        },
        {
          id: '6-9',
          name: 'Seifencreme und Patronen',
          artnr: '',
          description: 'Hygienische Seifencreme und Patronen f√ºr Seifenspender.',
          features: ['Hygienisch', 'Hautschonend', 'F√ºr Spendersysteme'],
          image: '/products/seifencreme.jpg',
          unit: 'Packung',
          category: 'Sonstiges'
        },
        {
          id: '6-10',
          name: 'Waschpulver',
          artnr: '',
          description: 'Professionelle Waschpulver f√ºr verschiedene Anwendungen.',
          features: ['W√§scheweich', 'Kalkstop', 'Fleckensalz'],
          image: '/products/waschpulver.jpg',
          unit: 'Packung',
          category: 'Sonstiges'
        },
        {
          id: '6-11',
          name: 'Fl√ºssige Reinigungsmittel',
          artnr: '',
          description: 'Verschiedene fl√ºssige Reinigungsmittel f√ºr jeden Einsatzbereich.',
          features: [
            'Sanit√§rreiniger',
            'Bodenreiniger',
            'Scheuermilch',
            'Allzweckreiniger',
            'Glasreiniger',
            'Geschirrreiniger'
          ],
          image: '/products/reinigungsmittel.jpg',
          unit: 'Liter',
          category: 'Sonstiges'
        }
      ]
    }
  ];

  const handleQuantityChange = (productId: string, newQuantity: number) => {
    if (newQuantity < 1) return;
    setQuantities(prev => ({
      ...prev,
      [productId]: newQuantity
    }));
  };

  const addToCart = (product: Product, category: string) => {
    const quantity = quantities[product.id] || 1;
    addItem({
      id: product.id,
      name: product.name,
      quantity: quantity,
      unit: product.unit,
      category: category
    });
    alert(`${quantity} ${product.unit} ${product.name} wurden zum Warenkorb hinzugef√ºgt.`);
  };

  // Filterfunktion f√ºr Produkteigenschaften
  const filteredProducts = products[0].items.filter((product) => {
    if (activeFilters.length === 0) return true;
    const features = productFeaturesIcons[product.id] || [];
    return activeFilters.every((filter) => features.includes(filter as keyof typeof icons));
  });

  return (
    <div className="min-h-screen bg-gray-50 py-12">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="text-center mb-12">
          <h1 className="text-4xl font-bold text-gray-900 mb-4">Unsere Produkte</h1>
          <p className="text-lg text-gray-600 max-w-2xl mx-auto">
            Entdecken Sie unsere hochwertigen Produkte f√ºr Ihre industriellen Anforderungen.
          </p>
          <div className="mt-6">
            <a
              href="/downloads/produktdatenblatt.pdf"
              className="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
              download
            >
              <FaDownload size={20} />
              Produktdatenblatt herunterladen
            </a>
          </div>
        </div>

        {/* Filter-Buttons */}
        <div className="flex flex-wrap justify-center gap-3 mb-10">
          {filterOptions.map((option) => (
            <button
              key={option.key}
              onClick={() => setActiveFilters((prev) =>
                prev.includes(option.key)
                  ? prev.filter((f) => f !== option.key)
                  : [...prev, option.key]
              )}
              className={`flex items-center gap-2 px-4 py-2 rounded-lg border shadow transition-colors
                ${activeFilters.includes(option.key)
                  ? 'bg-blue-600 text-white border-blue-600'
                  : 'bg-white text-gray-700 border-gray-300 hover:bg-blue-50'}
              `}
              type="button"
            >
              <span className="w-6 h-6">{option.icon}</span>
              <span className="text-sm font-medium">{option.label}</span>
            </button>
          ))}
        </div>

        {/* Putzlappen Gruppe */}
        <div className="mb-12">
          <h2 className="text-3xl font-bold mb-4">Putzlappen</h2>
          <p className="text-lg text-gray-700 whitespace-pre-line mb-2">{putzlappenGroupDescription}</p>
          <p className="text-md text-gray-600 mb-6 font-semibold">{putzlappenPackaging}</p>
        </div>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {filteredProducts.map((product) => (
            <div
              key={product.id}
              className="bg-white rounded-lg shadow-sm overflow-visible hover:shadow-md transition-shadow flex flex-col relative"
              onMouseLeave={() => setActiveTooltip(null)}
            >
              {/* Tooltip wieder direkt unter dem Icon, aber nicht abgeschnitten */}
              <div className="absolute top-3 right-3 flex space-x-2 z-10">
                {productFeaturesIcons[product.id]?.map((iconKey) => {
                  const tooltipKey = `${product.id}-${iconKey}`;
                  return (
                    <span
                      key={iconKey}
                      className="relative bg-white/70 rounded-lg p-1 shadow flex items-center justify-center cursor-pointer group"
                      onMouseEnter={() => setActiveTooltip(tooltipKey)}
                      onMouseLeave={() => setActiveTooltip(null)}
                    >
                      {icons[iconKey]}
                      {activeTooltip === tooltipKey && (
                        <span className="absolute left-1/2 -translate-x-1/2 top-full mt-2 px-4 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-lg z-30 w-max pointer-events-none whitespace-nowrap transition-opacity duration-200 opacity-100">
                          {(() => {
                            switch (iconKey) {
                              case 'cotton': return '100% Baumwolle';
                              case 'absorbent': return 'Sehr saugf√§hig';
                              case 'oil': return 'Ideal f√ºr Fett & √ñl';
                              case 'lintfree': return 'Fusselfrei';
                              case 'polish': return 'Polierf√§hig';
                              default: return '';
                            }
                          })()}
                        </span>
                      )}
                    </span>
                  );
                })}
              </div>
              <div className="w-full h-48 bg-gray-200 flex items-center justify-center relative">
                <Image 
                  src={product.image} 
                  alt={product.name} 
                  fill
                  className="object-cover opacity-70 rounded-md"
                  sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
                />
              </div>
              <div className="p-6 flex-1 flex flex-col">
                <h3 className="text-2xl font-semibold mb-2">{product.name}</h3>
                <p className="text-gray-700 mb-2 font-medium">Art.-Nr.: {product.artnr || ''}</p>
                <p className="text-gray-600 mb-4">{product.description}</p>
                <div className="flex items-center justify-between mt-auto">
                  <div className="flex items-center border rounded">
                    <button
                      onClick={() => handleQuantityChange(product.id, (quantities[product.id] || 1) - 1)}
                      className="px-3 py-1 hover:bg-gray-100"
                    >
                      -
                    </button>
                    <span className="px-3 py-1">{quantities[product.id] || 1} {product.unit}</span>
                    <button
                      onClick={() => handleQuantityChange(product.id, (quantities[product.id] || 1) + 1)}
                      className="px-3 py-1 hover:bg-gray-100"
                    >
                      +
                    </button>
                  </div>
                  <button
                    onClick={() => addToCart(product, 'Putzlappen')}
                    className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors"
                  >
                    Diesen Artikel anfragen
                  </button>
                </div>
              </div>
            </div>
          ))}
        </div>

        {products.map((category, categoryIndex) => (
          <div key={categoryIndex} className="mb-16">
            <h2 className="text-3xl font-bold mb-8">{category.category}</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
              {category.items.map((product) => (
                <div
                  key={product.id}
                  className="bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow"
                >
                  <div className="aspect-w-16 aspect-h-9 bg-gray-200">
                    {/* Placeholder for product image */}
                    <div className="w-full h-48 bg-gray-200" />
                  </div>
                  <div className="p-6">
                    <h3 className="text-2xl font-semibold mb-3">{product.name}</h3>
                    <p className="text-gray-600 mb-4">{product.description}</p>
                    <div className="space-y-2 mb-6">
                      {product.features.map((feature, featureIndex) => (
                        <div key={featureIndex} className="flex items-center text-gray-600">
                          <svg
                            className="w-5 h-5 text-blue-600 mr-2"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                          >
                            <path
                              strokeLinecap="round"
                              strokeLinejoin="round"
                              strokeWidth={2}
                              d="M5 13l4 4L19 7"
                            />
                          </svg>
                          {feature}
                        </div>
                      ))}
                    </div>
                    <div className="flex items-center justify-between">
                      <div className="flex items-center border rounded">
                        <button
                          onClick={() => handleQuantityChange(product.id, (quantities[product.id] || 1) - 1)}
                          className="px-3 py-1 hover:bg-gray-100"
                        >
                          -
                        </button>
                        <span className="px-3 py-1">{quantities[product.id] || 1} {product.unit}</span>
                        <button
                          onClick={() => handleQuantityChange(product.id, (quantities[product.id] || 1) + 1)}
                          className="px-3 py-1 hover:bg-gray-100"
                        >
                          +
                        </button>
                      </div>
                      <button
                        onClick={() => addToCart(product, category.category)}
                        className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors"
                      >
                        In den Warenkorb
                      </button>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        ))}

        <div className="mt-16 text-center">
          <h2 className="text-3xl font-bold mb-6">Individuelle Beratung</h2>
          <p className="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
            Ben√∂tigen Sie eine spezielle L√∂sung f√ºr Ihre Reinigungsanforderungen? Unser Team ber√§t Sie gerne bei der Auswahl der passenden Produkte.
          </p>
          <a
            href="/kontakt"
            className="inline-block bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors"
          >
            Beratung anfordern
          </a>
        </div>
      </div>
    </div>
  );
} 